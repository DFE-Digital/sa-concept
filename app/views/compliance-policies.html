{% extends "layouts/admin.html" %}

{% set selectedNav = "Compliance" %}
{% set pageName = "Compliance" %}
{% set pageDescription = "" %}
{% set trust = true %}

{% set view = "policies" %}

{% block hero %}
  {% include './_compliance_header.html'%}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">

    <div class="govuk-grid-column-one-quarter">
      <div class="govuk-summary-card">
        <div class="govuk-summary-card__title-wrapper">
          <h2 class="govuk-summary-card__title">Filter policies</h2>

        </div>
        <div class="govuk-summary-card__content">

          <div class="govuk-form-group">
            <label class="govuk-label" for="policy-name">
    Search by name
  </label>
            <input class="govuk-input" id="policy-name" name="policyName" type="text">
          </div>

        </div>
      </div>
    </div>

    <div class="govuk-grid-column-three-quarters">

      <h2 class="govuk-heading-m govuk-!-margin-top-3 govuk-!-margin-bottom-0">Your policies and procedures</h2>
      <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

        <div class="govuk-summary-card">
          <div class="govuk-summary-card__title-wrapper">
            <h2 class="govuk-summary-card__title">Policies</h2>
<ul class="govuk-summary-card__actions">
            <li class="govuk-summary-card__action">
              <a class="govuk-link govuk-link--no-visited-state" href="#">Add a policy</a>
            </li>
          </ul>
          </div>
          <div class="govuk-summary-card__content">

            <table class="govuk-table">
              <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                  <th scope="col" class="govuk-table__header govuk-!-width-one-quarter">Policy Name</th>
                  <th scope="col" class="govuk-table__header  govuk-!-width-one-half">Description</th>
                  <th scope="col" class="govuk-table__header  govuk-!-width-one-quarter">Last Updated</th>
                </tr>
              </thead>
              <tbody class="govuk-table__body">
                <!-- Accounting Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Accounting Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Accounting Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-1"></td>
                </tr>

                <!-- Adoption Scheme Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Adoption Scheme Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Adoption Scheme Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-2"></td>
                </tr>

                <!-- Appraisal Policy Associate Staff -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Appraisal Policy Associate Staff</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Appraisal Policy Associate Staff.</td>
                  <td class="govuk-table__cell" id="last-updated-3"></td>
                </tr>

                <!-- Appraisal Policy Teachers -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Appraisal Policy Teachers</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Appraisal Policy Teachers.</td>
                  <td class="govuk-table__cell" id="last-updated-4"></td>
                </tr>

                <!-- Arson Prevention Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Arson Prevention Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Arson Prevention Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-5"></td>
                </tr>

                <!-- Business Continuity Plan -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Business Continuity Plan</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Business Continuity Plan.</td>
                  <td class="govuk-table__cell" id="last-updated-6"></td>
                </tr>

                <!-- Capability Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Capability Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Capability Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-7"></td>
                </tr>

                <!-- CCTV Code of Practice Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">CCTV Code of Practice Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the CCTV Code of Practice Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-8"></td>
                </tr>

                <!-- CCTV Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">CCTV Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the CCTV Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-9"></td>
                </tr>

                <!-- Charging and Remission Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Charging and Remission Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Charging and Remission Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-10"></td>
                </tr>

                <!-- Code of Employee Conduct Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Code of Employee Conduct Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Code of Employee Conduct Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-11"></td>
                </tr>

                <!-- Community Use Agreement Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Community Use Agreement Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Community Use Agreement Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-12"></td>
                </tr>

                <!-- Complaints Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Complaints Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Complaints Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-13"></td>
                </tr>

                <!-- Data Protection Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Data Protection Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Data Protection Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-14"></td>
                </tr>

                <!-- Dignity at Work Policy -->
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">
                    <a href="#" class="govuk-link govuk-link--no-visited-state">Dignity at Work Policy</a>
                  </th>
                  <td class="govuk-table__cell">Description of the Dignity at Work Policy.</td>
                  <td class="govuk-table__cell" id="last-updated-15"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <script>
          // Function to generate a random date within the last 9 months and format it as "D MMM YYYY"
          function getRandomDateFormatted() {
            const today = new Date();
            const randomMonth = Math.floor(Math.random() * 9); // Random month between 0 and 8 (last 9 months)
            const randomDay = Math.floor(Math.random() * 28) + 1; // Random day between 1 and 28
            const randomYear = today.getFullYear();
            const generatedDate = new Date(randomYear, today.getMonth() - randomMonth, randomDay);
            return generatedDate.toLocaleDateString('en-GB', {
              day: 'numeric',
              month: 'short',
              year: 'numeric'
            });
          }

          // Update the "Last Updated" cells with random dates in the desired format
          for (let i = 1; i <= 15; i++) {
            const lastUpdatedCell = document.getElementById(`last-updated-${i}`);
            if (lastUpdatedCell) {
              const randomDateFormatted = getRandomDateFormatted();
              lastUpdatedCell.textContent = randomDateFormatted;
            }
          }

          // Function to filter table rows based on the entered text
          document
            .getElementById("policy-name")
            .addEventListener("input", function () {
              const searchText = this
                .value
                .toLowerCase();
              const rows = document.querySelectorAll(".govuk-table__row");

              rows.forEach(function (row) {
                const policyNameCell = row.querySelector(".govuk-table__row > .govuk-table__header > a");
                if (policyNameCell) {
                  const policyName = policyNameCell
                    .textContent
                    .toLowerCase();
                  if (policyName.includes(searchText)) {
                    row.style.display = "table-row";
                  } else {
                    row.style.display = "none";
                  }
                }
              });
            });
        </script>

      </div>

      <div class="govuk-grid-column-one-quarter"></div>

    </div>

  {% endblock %}